<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <title>Vaidx NumWorks - S√©lection USB</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: 'Segoe UI', sans-serif;
      background-color: #0d0d0d;
      color: #fff;
      display: flex;
      flex-direction: column;
      min-height: 100vh;
      padding: 40px 5%;
      max-width: 900px;
      margin: auto;
    }

    header {
      background-color: #1b1b1b;
      padding: 25px;
      text-align: center;
      box-shadow: 0 2px 10px #000;
      border-radius: 12px;
      margin-bottom: 40px;
    }

    header h1 {
      color: #f9b800;
      font-size: 2.8rem;
      text-shadow: 0 0 8px #f9b80088;
    }

    main {
      flex: 1;
      background-color: #1c1c1c;
      padding: 30px 40px;
      border-radius: 14px;
      box-shadow: 0 0 20px #f9b80044;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    h2 {
      color: #ffce3a;
      margin-bottom: 30px;
      font-size: 2.4rem;
      text-align: center;
    }

    #device-info {
      width: 100%;
      max-width: 750px;
      margin-bottom: 50px;
      border-collapse: collapse;
      font-size: 1.1rem;
    }

    #device-info th,
    #device-info td {
      padding: 12px 15px;
      border-bottom: 1px solid #333;
      text-align: left;
    }

    #device-info th {
      background-color: #2a2a2a;
      color: #f9b800;
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }

    #device-info td {
      color: #ddd;
    }

    #no-device {
      margin-bottom: 50px;
      color: #ff5555;
      font-size: 1.2rem;
    }

    .btn-select {
      padding: 16px 40px;
      font-size: 1.3rem;
      font-weight: bold;
      background: linear-gradient(90deg, #f9b800, #ffcf3d);
      color: #000;
      border: none;
      border-radius: 30px;
      box-shadow: 0 0 20px #f9b800cc;
      cursor: pointer;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
      user-select: none;
    }

    .btn-select:hover {
      transform: scale(1.05);
      box-shadow: 0 0 35px #f9b800ee;
    }

    footer {
      margin-top: auto;
      background-color: #1a1a1a;
      text-align: center;
      padding: 18px;
      font-size: 1rem;
      color: #f9b800;
      border-top: 1px solid #333;
      border-radius: 0 0 12px 12px;
    }

    @media (max-width: 600px) {
      main {
        padding: 20px;
      }

      #device-info {
        font-size: 1rem;
      }

      .btn-select {
        width: 100%;
        font-size: 1.1rem;
        padding: 14px 0;
      }
    }
  </style>
</head>
<body>
  <header>
    <h1>Vaidx NumWorks</h1>
  </header>

  <main>
    <h2>S√©lectionnez un p√©riph√©rique USB</h2>

    <div id="no-device">Aucun p√©riph√©rique USB d√©tect√©.</div>

    <table id="device-info" style="display:none;">
      <thead>
        <tr>
          <th>Propri√©t√©</th>
          <th>Valeur</th>
        </tr>
      </thead>
      <tbody>
        <!-- Infos USB dynamiques ins√©r√©es ici -->
      </tbody>
    </table>

    <button class="btn-select" id="btn-select-usb">S√©lectionner un p√©riph√©rique USB</button>
  </main>

  <footer>
    ¬© 2025 Vaidx ‚Ä¢ Fait par passion pour les fans de NumWorks ‚Ä¢ üêç Python + üß†
  </footer>

  <script>
    const btnSelectUsb = document.getElementById('btn-select-usb');
    const noDeviceDiv = document.getElementById('no-device');
    const deviceInfoTable = document.getElementById('device-info');
    const deviceInfoBody = deviceInfoTable.querySelector('tbody');

    async function selectUsbDevice() {
      try {
        const device = await navigator.usb.requestDevice({ filters: [{ vendorId: 0x0483 }] });
        if (!device) return;

        noDeviceDiv.style.display = 'none';
        deviceInfoTable.style.display = 'table';

        // Nettoyer la table avant d'ins√©rer
        deviceInfoBody.innerHTML = '';

        // Exemple d'infos √† afficher, tu peux en rajouter plus ou les modifier
        const infos = {
          'Nom du produit': device.productName || 'N/A',
          'Fabricant': device.manufacturerName || 'N/A',
          'Num√©ro de s√©rie': device.serialNumber || 'N/A',
          'ID fournisseur (VID)': '0x' + device.vendorId.toString(16).padStart(4, '0'),
          'ID produit (PID)': '0x' + device.productId.toString(16).padStart(4, '0'),
          'Configurations': device.configurations.length,
          'Classe du p√©riph√©rique': '0x' + device.deviceClass.toString(16).padStart(2, '0'),
          'Sous-classe du p√©riph√©rique': '0x' + device.deviceSubclass.toString(16).padStart(2, '0'),
          'Protocole du p√©riph√©rique': '0x' + device.deviceProtocol.toString(16).padStart(2, '0'),
          'Num√©ro de port': device.portNumber || 'N/A'
        };

        for (const [key, value] of Object.entries(infos)) {
          const tr = document.createElement('tr');
          const tdKey = document.createElement('td');
          tdKey.textContent = key;
          const tdValue = document.createElement('td');
          tdValue.textContent = value;
          tr.appendChild(tdKey);
          tr.appendChild(tdValue);
          deviceInfoBody.appendChild(tr);
        }
      } catch (error) {
        if (error.name === 'NotFoundError') {
          alert('Aucun p√©riph√©rique USB s√©lectionn√©.');
        } else {
          alert('Erreur : ' + error.message);
        }
      }
    }

    btnSelectUsb.addEventListener('click', selectUsbDevice);
  </script>
</body>
</html>
